<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.msix.admin.board.dao.QBoardDAO">

<!--  기본 조회 
<select id="boardList" resultType="qna">
	select q_no, m_no, q_tag, q_title, q_content, 
	to_char(q_date,'YYYY-MM-DD') as q_date, q_cnt
	from q_board
	order by q_no desc
</select> 	-->

<select id="boardDetail" parameterType="qna" resultType="qna">
	select q_no, m_no, q_tag, q_title, q_content, 
	to_char(q_date,'YYYY-MM-DD') as q_date
	from q_board
	where q_no = #{q_no}
</select>

<!-- 게시판 리스트 조회(페이징 처리 / ) -->
<select id="boardList" parameterType="qna" resultType="qna">
	<![CDATA[
			select
			    rnum, q_no, m_no, q_tag, q_title, q_content, 
			    to_char(q_date,'YYYY-MM-DD') as q_date, q_cnt
			from(
			    select /*+ index_desc(q_board q_board_pk) */
			        rownum as rnum, q_no, m_no, q_tag, q_title, q_content, 
			        q_date, q_cnt
			    from q_board
			    where rownum <= #{pageNum} * #{amount} 
			) boardlist
			where rnum > (#{pageNum} - 1) * #{amount}
		]]>
</select> 

<!-- 전체 레코드 수 조회 -->
<select id="qboardListCnt" parameterType="qna" resultType="int">
	select count(*) from q_board
	<!--<trim prefix=" where (" suffix=")" >
			<include refid="boardSearch"></include>
		</trim> -->
</select>

</mapper>