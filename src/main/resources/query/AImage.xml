<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.msix.admin.image.dao.AImageDAO">
	
	<!-- 상품 이미지 조회 -->
	<select id="imageDetail" parameterType="product" resultType="image">
		select i_no, p_no, i_name, i_thumb, to_char(i_date, 'YYYY-MM-DD') as i_date
		from image
		where p_no = #{p_no}
	</select>
	
	<!-- 상품 이미지 등록 -->
	<insert id="imageInsert" parameterType="image">
		insert into image(i_no, p_no, i_name
		<if test="i_thumb != ''">
			, i_thumb
		</if>
		) 
		values(msix_image_seq.nextval, #{p_no}, #{i_name}
		<if test="i_thumb != ''">
			, #{i_thumb}
		</if>
		)
	</insert>
	
	<!-- 상품 이미지 수정 -->
	<update id="imageUpdate" parameterType="image">
		update image set i_date = sysdate
		<if test="i_name != ''">
			, i_name = #{i_name}
		</if>
		<if test="i_thumb != ''">
			, i_thumb = #{i_thumb}
		</if>
		where i_no = #{i_no} and p_no = #{p_no}
	</update>
	
	<!-- 상품 이미지 삭제 -->
	<delete id="imageDelete" parameterType="image">
		delete from image where i_no = #{i_no} and p_no = #{p_no} 
	</delete>
	
</mapper>