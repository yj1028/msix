<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper	namespace="com.msix.admin.notice.dao.ANoticeDAO">
	<!-- 전체 레코드 수 조회 -->
	<select id="nboardListCnt" parameterType="notice" resultType="int">
		select count(*) from n_board
		<!--<trim prefix=" where (" suffix=")" >
				<include refid="boardSearch"></include>
			</trim> -->
	</select>
	
	<!-- 게시판 리스트 조회(페이징 처리 / ) -->
	<select id="boardList" parameterType="notice" resultType="notice">
		<![CDATA[
				select
				     n_no, n_title, n_content, 
				     to_char(n_date,'YYYY-MM-DD') as n_date, n_cnt 
				from(
				    select /*+ index_desc(n_board n_board_pk) */
				        rownum as rnum, n_no, n_title, n_content, 
				     	n_date, n_cnt 
				    from n_board
				    where rownum <= #{pageNum} * #{amount} 
				) boardlist
				where rnum > (#{pageNum} - 1) * #{amount}
			]]>
	</select> 
	
	<!-- 기본 조회 
	<select id="boardList" resultType="notice">
		select n_no, n_title, n_content, to_char(n_date,'YYYY-MM-DD') as n_date, n_cnt 
		from n_board
		order by n_no desc
	</select> -->
	
	<insert id="boardInsert" parameterType="notice">
		insert into n_board(n_no, n_title, n_content, n_date, n_cnt)
		values(n_board_seq.nextval, #{n_title}, #{n_content}, sysdate, 0) 
	</insert>
	
	<select id="boardDetail" parameterType="notice" resultType="notice">
		select n_no, n_title, n_content, to_char(n_date,'YYYY-MM-DD') as n_date, n_cnt 
		from n_board
		where n_no = #{n_no}
	</select>
	
	<update id="boardUpdate" parameterType="notice">
		update n_board
		set n_title = #{n_title}, n_content = #{n_content}
		where n_no = #{n_no}		
	</update>
	
	<delete id="boardDelete" parameterType="notice">
		delete from n_board 
		where n_no = #{n_no}
	</delete>
	
	
</mapper>